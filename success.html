<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<link rel="icon" href="favicon.svg" type="image/svg+xml">
<title>Brady's Chess Bonanza</title>   <!-- or “Play Chess” in success.html -->
<style>
body {
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 40px;
  background: url('bg.svg');
  background-size: 100px 100px;
}

/* existing rules … */
#payButton { padding: 12px 24px; font-size: 18px; cursor: pointer; } /* index.html */
#board     { width: 400px; margin: 20px auto; }                       /* success.html */
</style>

    <script type="module">
      import { Supertab } from "https://js.supertab.co/v3/supertab.js";

      // Initialize Supertab client
      const supertabClient = new Supertab({ clientId: "live_client.e1db4014-b0a3-4166-a7ba-18df5e16ee9e" });

      // Create the paygate
      const { initialState, show } = await supertabClient.createPaygate({
        experienceId: "experience.e2b860b5-c217-4c78-ad28-137b637a7fbe"
      });

      // Check if the user has prior entitlement
      if (initialState.priorEntitlement) {
        // Insert your code to handle when user has prior entitlement when accessing the page
        console.log("User has prior entitlement", initialState.priorEntitlement);
      } else {
        // Show the paygate
        const { priorEntitlement, purchase, purchasedOffering } = await show();

        if (priorEntitlement) {
          // Insert your code to handle when user has prior entitlement
          console.log("User has prior entitlement", priorEntitlement);
        } else if (purchase && purchase.status === "completed") {
          // Insert your code to handle when user purchases an offering
          console.log("Purchase completed!", purchase);
        } else {
          // Insert your code to handle when user abandons the flow without purchase or prior entitlement
          console.log("Purchase canceled!");
          window.location.href = "https://bradybryant.github.io";
        }
      }
    </script>
  
</head>
<body>
  <h2 style="text-align:center;">Enjoy your game!</h2>
  <div id="board"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.13.4/chess.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chessboard.js/1.0.0/js/chessboard.min.js"></script>
  <script>
    const game = new Chess();
    const board = Chessboard('board', {
      draggable: true,
      position: 'start',
      onDrop: function (source, target) {
        const move = game.move({ from: source, to: target, promotion: 'q' });
        if (move === null) return 'snapback';
      },
      onSnapEnd: function () {
        board.position(game.fen());
      }
    });
  </script>
</body>
</html>
